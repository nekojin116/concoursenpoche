(()=>{"use strict";const e=window.wp.blocks,t=window.React,l=window.wp.blockEditor,a=window.wp.element,n=window.wp.i18n;function c(){return(0,t.createElement)("div",{className:"block-spinner-wrap"},(0,t.createElement)("span",{className:"spinner is-active"}))}const o=(e,t)=>{const{limit:l}=e,a=t?Object.values(t):[],c=(t=>{let l;const a=t=>t.findIndex((t=>t.key===e.orderBy));return l=t.some((e=>"image"===e.key))?a(t):a(t)+1,l})(a),o=(e,t=[],l)=>{const a=[];return e.forEach(((e,n)=>{"exclude"===l?!t.includes(e.key)&&a.push(n):t.includes(e.key)&&a.push(n)})),a},s=[];return a.forEach(((e,t)=>{-1!==["image","link"].indexOf(e.key)&&s.push(t)})),{order:-1===c?[]:[c,e.orderType.toLowerCase()],columnDefs:[{type:"natural-nohtml",target:o(a,["size","updated"],"exclude")},{type:"file-size",targets:o(a,["size"],"include")},{orderable:!1,target:0!==s.length?s:[]},{searchable:!1,target:o(a,["link","image"],"include")},{type:"date-sort",targets:o(a,["updated"],"include")}],lengthMenu:[[l,2*l,4*l,8*l,-1],[l,2*l,4*l,8*l,(0,n.__)("All","catfolders-document-gallery")]],language:{searchPlaceholder:(0,n.__)("Search by titleâ€¦","catfolders-document-gallery"),search:(0,n.__)("Search:","catfolders-document-gallery"),lengthMenu:`<span>${(0,n.__)("Items per page","catfolders-document-gallery")}</span> _MENU_`,info:"_START_ - _END_ "+(0,n.__)("of","catfolders-document-gallery")+" _TOTAL_",paginate:{next:'<svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1.5L6 7L1 12.5" stroke="currentColor" stroke-width="1.5"/></svg>',previous:'<svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 1.5L2 7L7 12.5" stroke="currentColor" stroke-width="1.5"/></svg>'},aria:{sortAscending:(0,n.__)(": activate to sort column ascending","catfolders-document-gallery"),sortDescending:(0,n.__)(": activate to sort column descending","catfolders-document-gallery")}},pageLength:+l,autoWidth:!1,responsive:!0,sDom:r(e),drawCallback(t){const l=this.api().page.info().recordsTotal,a=jQuery(t.nTableWrapper).closest("#cf-app");!function(e,t,l=0){l<e.limit&&t.find(".cf-pagination").css("display","none"),e.libraryIcon.display?t.find(".cf-title img").css("display","block"):t.find(".cf-title img").css("display","none"),e.displayTitle?t.find(".cf-title span").css("display","block"):t.find(".cf-title span").css("display","none"),t.find(".cf-table__top").is(":empty")&&t.find(".cf-table__top").css("display","none"),t.find(".cf-table__bottom").is(":empty")&&t.find(".cf-table__bottom").css("display","none"),e.documentIcons.display?t.find(".cf-icon").removeClass("cf-hidden"):t.find(".cf-icon").addClass("cf-hidden"),e.displayColumns.image&&(t.find("th:first-child").addClass("cf-thumbnail-th"),t.find(".cf-table").addClass("cf-has-thumbnail"))}(e,a,l),f(a,e.displayColumns),u(t)}}},r=e=>{const t=e.searchBarPlacement,l=e.paginationPlacement,a=e.layoutIconPlacement;return'<"cf-table__top"'+("top"===t||"both"===t?"f":"")+("top"===a||"both"===a?' <"cf-options_info"l <"cf-options" <"cf-options__list"><"cf-options__grid">>>':"")+("top"===l||"both"===l?'<"cf-pagination" lip>':"")+'><"cf-table__main"rt><"cf-table__bottom"'+("bottom"===t||"both"===t?"f":"")+("bottom"===a||"both"===a?'<"cf-options_info"l <"cf-options" <"cf-options__list"><"cf-options__grid">>>':"")+("bottom"===l||"both"===l?'<"cf-pagination" lip>':"")+">"},s=(e,t)=>{const l=jQuery("#"+e).closest("#cf-app"),a=l.find(".cf-table"),n=l.find(".cf-options__grid"),c=l.find(".cf-options__list");"grid"===t?(n.addClass("active"),c.removeClass("active"),a.addClass("cf-table-grid"),a.find(".cf-column-thumbnail").length>0&&a.addClass("cf-has-thumbnail")):(c.addClass("active"),n.removeClass("active"),a.removeClass("cf-table-grid"),a.removeClass("cf-has-thumbnail"))},i=(e,t)=>{jQuery("#"+e).closest("#cf-app").find(".cf-title").replaceWith((function(){return jQuery(`<${t}>`,{class:"cf-title"}).html(jQuery(this).html())}))},d=e=>{const t=jQuery("#"+e).closest("#cf-app");t.find(".cf-table-grid .cf-column-thumbnail").length>0?t.find(".cf-table").addClass("cf-has-thumbnail"):t.find(".cf-table").removeClass("cf-has-thumbnail")},u=e=>{jQuery.each(e.aoHeader,(function(e,t){jQuery.each(t,(function(e,t){const l=t.cell.ariaLabel.replace(/\s*:\s*/g,": ").trim();jQuery(t.cell).attr("aria-description",l),jQuery(t.cell).removeAttr("aria-label")}))}))},m=e=>{const t=e.match(/<[^>]+>([^<]+)<\/[^>]+>/);return t?t[1].replace(/\t/g,"").toLowerCase():""},p=(e,t,l)=>{const a=Date.parse(m(e)),n=Date.parse(m(t));switch(l){case"asc":return a<n?-1:a>n?1:0;case"desc":return a<n?1:a>n?-1:0}};function f(e,t){t.image?t.title||t.size||t.updated?(e.find("td:first-child").removeClass("no-margin-bottom"),e.find("td:first-child").addClass("has-margin-bottom"),e.find(".cf-column-last").removeClass("no-margin-top"),e.find(".cf-column-last").addClass("has-margin-top")):t.title||t.size||t.updated||(e.find("td:first-child").removeClass("has-margin-bottom"),e.find("td:first-child").addClass("no-margin-bottom"),e.find(".cf-column-last").removeClass("has-margin-top"),e.find(".cf-column-last").addClass("no-margin-top")):t.image||(t.title||t.size||t.updated)&&(e.find("td:first-child").removeClass("has-margin-bottom"),e.find("td:first-child").addClass("no-margin-bottom"),e.find(".cf-column-last").removeClass("no-margin-top"),e.find(".cf-column-last").addClass("has-margin-top"))}(0,n.__)("Thumbnail","catfolders-document-gallery"),(0,n.__)("Medium","catfolders-document-gallery"),(0,n.__)("Large","catfolders-document-gallery"),(0,n.__)("Full Size","catfolders-document-gallery");const g=[{value:"list",label:(0,n.__)("List","catfolders-document-gallery")},{value:"grid",label:(0,n.__)("Grid","catfolders-document-gallery")}],y=[{value:"title",label:(0,n.__)("Title","catfolders-document-gallery")},{value:"updated",label:(0,n.__)("Modified","catfolders-document-gallery")},{value:"size",label:(0,n.__)("Size","catfolders-document-gallery")},{value:"counter",label:(0,n.__)("Counter","catfolders-document-gallery")}],h=[{value:"ASC",label:(0,n.__)("Ascending","catfolders-document-gallery")},{value:"DESC",label:(0,n.__)("Descending","catfolders-document-gallery")}],_=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"}],b=[{value:"image",label:(0,n.__)("Image","catfolders-document-gallery")},{value:"title",label:(0,n.__)("Title","catfolders-document-gallery")},{value:"type",label:(0,n.__)("Type","catfolders-document-gallery")},{value:"size",label:(0,n.__)("Size","catfolders-document-gallery")},{value:"updated",label:(0,n.__)("Updated","catfolders-document-gallery")},{value:"counter",label:(0,n.__)("Counter","catfolders-document-gallery")},{value:"link",label:(0,n.__)("Link","catfolders-document-gallery")}],v=[{value:"preview",label:(0,n.__)("Preview File","catfolders-document-gallery")},{value:"popup",label:(0,n.__)("Popup Window","catfolders-document-gallery")},{value:"download",label:(0,n.__)("Download File","catfolders-document-gallery")},{value:"",label:(0,n.__)("None","catfolders-document-gallery")}],C=[{value:"p",label:(0,n.__)("Paragraph","catfolders-document-gallery")},{value:"h1",label:(0,n.__)("Heading 1","catfolders-document-gallery")},{value:"h2",label:(0,n.__)("Heading 2","catfolders-document-gallery")},{value:"h3",label:(0,n.__)("Heading 3","catfolders-document-gallery")},{value:"h4",label:(0,n.__)("Heading 4","catfolders-document-gallery")}],w=[{value:"top",label:(0,n.__)("Top","catfolders-document-gallery")},{value:"bottom",label:(0,n.__)("Bottom","catfolders-document-gallery")},{value:"both",label:(0,n.__)("Both","catfolders-document-gallery")},{value:"",label:(0,n.__)("Hide","catfolders-document-gallery")}],{PanelBody:E,RadioControl:N,SelectControl:x,RangeControl:T,ToggleControl:I}=wp.components;function M({attributes:e,setAttributes:c,clientId:o,setNotice:r,topRef:i}){const{libraryIcon:u,displayTitle:m,layout:p,gridColumn:y,displayColumns:h,searchBarPlacement:v,paginationPlacement:C,layoutIconPlacement:M,documentIcons:k}=e,[j,z]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(()=>{const e=catf_dg.verify_imagick,t={...h};e.status||(t.image=!1,c({displayColumns:t})),z(e.status)})()}),[]);return(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(E,{title:(0,n.__)("Display Options","catfolders-document-gallery"),initialOpen:!1},(0,t.createElement)("h3",null,(0,n.__)("Library Icon","catfolders-document-gallery")),(0,t.createElement)(I,{label:u.display?(0,n.__)("Show","catfolders-document-gallery"):(0,n.__)("Hide","catfolders-document-gallery"),checked:u.display,onChange:e=>{c({libraryIcon:{...u,display:e}}),((e,t)=>{const l=jQuery("#"+e).closest("#cf-app").find(".cf-title img");t?l.css("display","block"):l.css("display","none")})(o,e)}}),(0,t.createElement)("h3",null,(0,n.__)("Library Title","catfolders-document-gallery")),(0,t.createElement)(I,{label:m?(0,n.__)("Show","catfolders-document-gallery"):(0,n.__)("Hide","catfolders-document-gallery"),checked:m,onChange:e=>{c({displayTitle:e}),((e,t)=>{const l=jQuery("#"+e).closest("#cf-app").find(".cf-title span");t?l.css("display","block"):l.css("display","none")})(o,e)}}),(0,t.createElement)("h3",null,(0,n.__)("Document Icons","catfolders-document-gallery")),(0,t.createElement)(I,{label:k.display?(0,n.__)("Show","catfolders-document-gallery"):(0,n.__)("Hide","catfolders-document-gallery"),checked:k.display,onChange:e=>{c({documentIcons:{...k,display:e}}),((e,t)=>{const l=jQuery("#"+e).closest("#cf-app").find(".cf-icon");t?l.removeClass("cf-hidden"):l.addClass("cf-hidden"),d(e)})(o,e)}}),(0,t.createElement)(x,{label:(0,n.__)("Search Bar Placement","catfolders-document-gallery"),options:w,value:v,onChange:e=>c({searchBarPlacement:e})}),(0,t.createElement)(x,{label:(0,n.__)("Pagination Placement","catfolders-document-gallery"),options:w,value:C,onChange:e=>c({paginationPlacement:e})}),(0,t.createElement)(x,{label:(0,n.__)("Layout Icon Placement","catfolders-document-gallery"),options:w,value:M,onChange:e=>c({layoutIconPlacement:e})}),(0,t.createElement)(N,{label:(0,n.__)("Layout Display","catfolders-document-gallery"),onChange:e=>{c({layout:e}),s(o,e)},options:g,selected:p}),"grid"===p&&(0,t.createElement)(T,{label:"Column",allowReset:!0,resetFallbackValue:3,step:1,withInputField:!1,separatorType:"none",trackColor:"green",isShiftStepEnabled:!0,marks:_,railColor:"red",value:y,onChange:e=>c({gridColumn:e}),min:1,max:6}),(0,t.createElement)("h3",null,(0,n.__)("Display Fields","catfolders-document-gallery")),b.map((e=>(0,t.createElement)(I,{key:e.value,label:e.label,checked:h[e.value],onChange:t=>(async(e,t)=>{const l={...h};l[e]="image"===e?(e=>j?(r({imageColumnNotice:!1}),e):(i.current.scrollIntoView({top:0,left:0,behavior:"smooth"}),r({imageColumnNotice:!0}),!1))(t):t,await c({displayColumns:l}),f(jQuery("#"+o).closest("#cf-app"),l),d(o)})(e.value,t)})))))}const{SelectControl:k,Button:j}=wp.components,z=(0,a.memo)((({folders:e,treeOptions:l,setAttributes:a})=>(0,t.createElement)(t.Fragment,null,l.length>0?(0,t.createElement)(k,{className:"catf-dg-select-wrapper",label:(0,n.__)("Folders","catfolders-document-gallery"),value:e,options:l,multiple:!0,onChange:e=>a({folders:e}),style:{height:200,overflow:"auto"}}):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("p",null,(0,n.__)("Oops, you don't have any folder","catfolders-document-gallery")),(0,t.createElement)(j,{href:`${window.catfData.adminUrl}upload.php`,variant:"primary",target:"_blank",className:"catf-dg-create-folder-btn"},(0,n.__)("Create your first folder","catfolders-document-gallery")))))),{PanelBody:D,__experimentalNumberControl:Q,RadioControl:L,SelectControl:S,TextControl:A}=wp.components;function O({attributes:e,setAttributes:a,clientId:c}){const{libraryIcon:o,title:r,displayTitle:s,titleTag:d,linkTo:u,popupWidth:m,popupHeight:p,limit:f,orderBy:g,orderType:_}=e;return(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(D,{title:(0,n.__)("General Options","catfolders-document-gallery")},(0,t.createElement)(A,{disabled:!s,label:(0,n.__)("Library Title Text","catfolders-document-gallery"),value:r,onChange:e=>{a({title:e}),((e,t)=>{jQuery("#"+e).closest("#cf-app").find(".cf-title span")[0].innerHTML=t})(c,e)}}),(0,t.createElement)(S,{disabled:!s,label:(0,n.__)("Library Title Tag","catfolders-document-gallery"),value:d,onChange:e=>{a({titleTag:e}),i(c,e)},options:C}),(0,t.createElement)(A,{disabled:!o.display,label:(0,n.__)("Library Icon Alt Text","catfolders-document-gallery"),value:o.altText,onChange:e=>{a({libraryIcon:{...o,altText:e}}),((e,t)=>{jQuery("#"+e).closest("#cf-app").find(".cf-title img")[0].setAttribute("alt",t)})(c,e)}}),(0,t.createElement)(S,{label:(0,n.__)("Link To","catfolders-document-gallery"),value:u,onChange:e=>{a({linkTo:e})},options:v}),"popup"===u&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Q,{className:"components-base-control",label:(0,n.__)("Popup Width","catfolders-document-gallery"),onChange:e=>{a({popupWidth:e})},min:100,max:2e3,shiftStep:5,step:1,value:m}),(0,t.createElement)(Q,{className:"components-base-control",label:(0,n.__)("Popup Height","catfolders-document-gallery"),onChange:e=>{a({popupHeight:e})},min:100,max:2e3,shiftStep:5,step:1,value:p})),(0,t.createElement)(Q,{className:"components-base-control",label:(0,n.__)("Limit items","catfolders-document-gallery"),onChange:e=>a({limit:+e}),min:1,max:200,shiftStep:5,step:1,value:f}),(0,t.createElement)(L,{label:(0,n.__)("Sort By","catfolders-document-gallery"),onChange:e=>{a({orderBy:e})},options:y,selected:g}),(0,t.createElement)(L,{label:(0,n.__)("Sort Type","catfolders-document-gallery"),onChange:e=>a({orderType:e}),options:h,selected:_})))}const P=e=>{const t=`#table-${e}`,l=(0,a.useRef)(null);return(0,a.useEffect)((()=>{jQuery.extend(jQuery.fn.dataTable.ext.type.order,{"date-sort-desc":(e,t)=>p(e,t,"desc")}),jQuery.extend(jQuery.fn.dataTable.ext.type.order,{"date-sort-asc":(e,t)=>p(e,t,"asc")})}),[]),{createDataTable:function(a,c,r){jQuery.fn.DataTable.isDataTable(t)&&jQuery(t).DataTable().destroy();const{titleTag:d,displayColumns:u,layout:m}=a,p=o(a,r);p.columns=(e=>[{data:"image",render:(e,t,l)=>`<div class="cf-column-thumbnail">${l.image}</div>`,visible:e.image,orderable:!1},{data:"title",render:(e,t,l)=>`<div class='flex'><a href="${l.url}" class="cf-icon icon-${(e=>["doc","jpg","mp4","other","pdf","ppt","wav","xls","zip"].includes(e)?e:["tif","tiff","jpeg","png","bmp","ithmb","gif","eps","raw","cr2","nef","orf","sr2","apng","avif","jfif","pjpeg","pjp","svg","ico","webp","psd","wbmp"].includes(e)?"jpg":["mp3","aac","aif","aifc","aiff","au","flac","m4a","mid","m4b","m4p","m4r","oga","ogg","opus","ra","ram","spx","wm"].includes(e)?"wav":["3gp","3gpp","3gpp2","3g2","asf","avi","dv","dvi","flv","m2t","m4v","mkv","mov","mpeg","mpg","mts","ogv","ogx","rm","rmvb","ts","vob","webm","wm"].includes(e)?"mp4":["pptx","ppthtml","pptm","pptxml","prn","ps","pps","ppsx","pwz","rtf","tab","template","tsv","vdx","vsd","vss","vst","vsx","vtx"].includes(e)?"ppt":["xlsx","csv","wpd","wps","xdp","xdf","xlam","xll","xlr","xlsb","xlsm","xltm","xltx","xps","wbk","wpd","wi"].includes(e)?"xls":["docx","dochtml","docm","docxml","odt","dot","dothtml","dotm","dotx","eps","fdf","key","keynote","kth","mpp","mpt","mpx","mpd"].includes(e)?"doc":["zip","rar","taz","gzip","tar.bz2","tar.gz"].includes(e)?"zip":"other")(l.type)}">${l.title}</a></div>`,visible:e.title},{data:"type",render:(e,t,l)=>`<div class='cf-column-type'>${l.type}</div>`,visible:e.type},{data:"size",render:(e,t,l)=>`<div class='cf-column-size'>${l.size}</div>`,visible:e.size},{data:"modified",render:(t,l,a)=>`<div class="${e.link?"cf-column-modified cf-column-link":"cf-column-modified"}">${a.modified}</div>`,visible:e.updated},{data:"download_count",render:(e,t,l)=>`<div class="cf-download-count">${l.download_count}</div>`,visible:e.counter},{data:"link",render:(e,t,l)=>`<div class='cf-column-last'><span class='cf-updated'><small>Updated</small>${l.modified}</span><a href="${l.link}" class="btn-download"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_1_337)">\n      <path d="M5.30186e-07 8.99044C0.00168761 4.04699 4.03718 0.00393964 8.97357 2.87451e-06C13.9611 -0.00393389 18.0017 4.03631 17.9994 9.02587C17.9978 13.9868 13.9448 18.0073 8.95389 18C4.02312 17.9927 -0.00168655 13.9429 5.30186e-07 8.99044ZM8.0991 11.3176C7.98213 11.2108 7.91465 11.1534 7.85166 11.091C7.53899 10.7811 7.23644 10.46 6.91252 10.1625C6.54586 9.8256 6.01162 9.85034 5.67196 10.1962C5.3351 10.5387 5.30305 11.0662 5.64271 11.4138C6.55317 12.3446 7.47488 13.2646 8.40615 14.1752C8.743 14.5042 9.24856 14.4862 9.6051 14.1707C9.73838 14.0531 9.86041 13.9226 9.98638 13.7967C10.7551 13.0284 11.5289 12.2658 12.2887 11.4886C12.7672 10.9993 12.6199 10.257 12.0041 10.0084C11.6251 9.85541 11.2871 9.95045 11.0042 10.2395C10.6612 10.5905 10.321 10.9448 9.97963 11.2974C9.95376 11.2816 9.92789 11.2665 9.90203 11.2507C9.90203 11.1517 9.90203 11.0527 9.90203 10.9538C9.90203 8.84534 9.89978 6.73749 9.90427 4.62907C9.90484 4.34338 9.84635 4.0858 9.64165 3.8839C9.3616 3.60776 9.02699 3.54084 8.65809 3.68088C8.31842 3.80966 8.10191 4.14091 8.10135 4.54584C8.0991 6.68238 8.10023 8.81835 8.10023 10.9549C8.10023 11.0533 8.10023 11.1523 8.10023 11.3171L8.0991 11.3176Z" fill="currentColor"/>\n      <path d="M8.09912 11.3176C8.09912 11.1528 8.09912 11.0539 8.09912 10.9554C8.09912 8.8189 8.09799 6.68292 8.10024 4.54638C8.10024 4.1409 8.31731 3.81021 8.65698 3.68142C9.02589 3.54138 9.36049 3.60831 9.64055 3.88445C9.84581 4.08634 9.90373 4.34448 9.90317 4.62962C9.89867 6.73804 9.90092 8.84589 9.90092 10.9543C9.90092 11.0533 9.90092 11.1523 9.90092 11.2513C9.92679 11.267 9.95266 11.2822 9.97852 11.2979C10.3199 10.9453 10.6595 10.591 11.0031 10.2401C11.286 9.951 11.624 9.85595 12.003 10.0089C12.6188 10.2575 12.7661 11.0004 12.2876 11.4891C11.5278 12.2658 10.7535 13.0284 9.98527 13.7972C9.8593 13.9232 9.73727 14.0531 9.60399 14.1712C9.24746 14.4867 8.7419 14.5053 8.40504 14.1757C7.47434 13.2652 6.55263 12.3451 5.64161 11.4143C5.30138 11.0668 5.334 10.5393 5.67085 10.1968C6.01108 9.85089 6.54476 9.82614 6.91142 10.163C7.23533 10.4605 7.53788 10.7817 7.85056 11.0915C7.91354 11.154 7.98159 11.2119 8.09799 11.3182L8.09912 11.3176Z" fill="white"/>\n    </g>\n    <defs>\n      <clipPath id="clip0_1_337">\n        <rect width="18" height="18" fill="white"/>\n      </clipPath>\n    </defs>\n  </svg>${(0,n.__)("Download","catfolders-document-gallery")}</a></div>`,visible:e.link,orderable:!1}])(u),p.data=c,c&&(l.current=jQuery(t).DataTable(p),((e,t)=>{const l=jQuery("#"+e).closest("#cf-app");l.find(".cf-options__list").append('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <rect width="20" height="4" rx="2" transform="matrix(-1 0 0 1 20 0)" fill="currentColor"/>\n    <rect width="20" height="4" rx="2" transform="matrix(-1 0 0 1 20 8)" fill="currentColor"/>\n    <rect width="20" height="4" rx="2" transform="matrix(-1 0 0 1 20 16)" fill="currentColor"/>\n  </svg>'),l.find(".cf-options__grid").append('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5 0C18.8807 0 20 1.11929 20 2.5V6.25C20 7.63071 18.8807 8.75 17.5 8.75H13.75C12.3693 8.75 11.25 7.63071 11.25 6.25V2.5C11.25 1.11929 12.3693 0 13.75 0H17.5Z" fill="currentColor"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 0C7.63071 0 8.75 1.11929 8.75 2.5V6.25C8.75 7.63071 7.63071 8.75 6.25 8.75H2.5C1.11929 8.75 0 7.63071 0 6.25V2.5C0 1.11929 1.11929 0 2.5 0H6.25Z" fill="currentColor"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 11.25C7.63071 11.25 8.75 12.3693 8.75 13.75V17.5C8.75 18.8807 7.63071 20 6.25 20H2.5C1.11929 20 0 18.8807 0 17.5V13.75C0 12.3693 1.11929 11.25 2.5 11.25H6.25Z" fill="currentColor"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5 11.25C18.8807 11.25 20 12.3693 20 13.75V17.5C20 18.8807 18.8807 20 17.5 20H13.75C12.3693 20 11.25 18.8807 11.25 17.5V13.75C11.25 12.3693 12.3693 11.25 13.75 11.25H17.5Z" fill="currentColor"/>\n  </svg>'),s(e,t)})(e,m),i(e,d))},dataTableRef:l}},H=async(e,t)=>{const l=catfData.apiSettings.rest_url,a=catfData.apiSettings.rest_nonce,c=await fetch(`${l}/${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":a},body:JSON.stringify(t)}).then((e=>{if(e.ok)return e;throw new Error((0,n.__)("Network response was not ok.","catfolders-document-gallery"))}));return await c.json()},{Placeholder:B,Icon:$}=wp.components,U=()=>(0,t.createElement)(B,{icon:(0,t.createElement)($,{icon:"media-document"}),label:(0,n.__)("CatFolders Document Gallery","catfolders-document-gallery"),instructions:(0,n.__)("Select folders to show content here","catfolders-document-gallery")},(0,t.createElement)("div",{style:{backgroundColor:"#e7e7e7",width:"100%",padding:"30px",display:"flex",justifyContent:"center"}},(0,t.createElement)("div",null,(0,n.__)("Please select your folders that you want display","catfolders-document-gallery")))),{useState:V,useEffect:Z}=wp.element,F=({attributes:e,clientId:l})=>{const[a,c]=V({}),{title:o,searchBarPlacement:r,paginationPlacement:s,layoutIconPlacement:i,displayColumns:d,folders:u,limit:m,orderBy:p,orderType:f}=e,{createDataTable:g,dataTableRef:y}=P(l),[h,_]=V(!1);return Z((()=>{(async()=>{const t={folders:null!=u?u:[],currentPage:1,limit:m,displayColumns:e.displayColumns},l=await H("get-attachments-folders",t);c(l)})()}),[u,m]),Z((()=>{_(!0)}),[r,s,i]),Z((()=>{g(e,a.files,a.columns),_(!1)}),[a,h]),Z((()=>{if(y.current)for(const[e,t]of Object.entries(d))y.current.column(Object.keys(d).findIndex((t=>t===e))).visible(t)}),[d]),Z((()=>{if(y.current){const e=Object.keys(d).findIndex((e=>e===p));y.current.order([e,f.toLowerCase()]).draw()}}),[p,f]),(0,t.createElement)(t.Fragment,null,a.foundPosts?(0,t.createElement)("div",{id:"cf-app",className:"cf-app catFolder-addons-block-editor",style:{pointerEvents:"none"}},(0,t.createElement)("div",{"data-layout":e.layout,className:`cf-main ${l}`,id:`${l}`},(0,t.createElement)("div",{className:"container"},(0,t.createElement)("p",{className:"cf-title"},(0,t.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDkiIGhlaWdodD0iMzgiIHZpZXdCb3g9IjAgMCA0OSAzOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ0LjI0NTkgNC4yNjU1NEgyMi44MjY3QzIxLjcxMjEgNC4yNjU1NCAyMC42NDYgMy43ODYyNyAxOS45MTkxIDIuOTcxNUwxOC42MTA3IDEuNTMzNjhDMTcuNzM4NSAwLjUyNzIwMiAxNi40MyAwIDE1LjEyMTYgMEg1LjYyMzU2QzMuMDA2NzQgMCAwLjkyMjk3NCAyLjA2MDg4IDAuOTIyOTc0IDQuNjQ4OTZWMzIuMzk5QzAuOTIyOTc0IDM0LjkzOTEgMy4wMDY3NCAzNy4wNDc5IDUuNjIzNTYgMzcuMDQ3OUg0NC4yNDU5QzQ2LjgxNDIgMzcuMDQ3OSA0OC45NDY0IDM0Ljk4NyA0OC45NDY0IDMyLjM5OVY4LjkxNDUxQzQ4Ljk0NjQgNi4zNzQzNSA0Ni44NjI3IDQuMjY1NTQgNDQuMjQ1OSA0LjI2NTU0Wk00NC42ODIgMzIuNzgyNEg1LjE4NzQyVjguNDgzMTZINDQuNjMzNVYzMi44MzAzTDQ0LjY4MiAzMi43ODI0WiIgZmlsbD0iIzIyNzFCMSIvPgo8L3N2Zz4K",alt:"ico-folders"}),(0,t.createElement)("span",null,o)),(0,t.createElement)("table",{id:`table-${l}`,className:"cf-table",style:{"--grid-column":e.gridColumn}},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,(0,t.createElement)("span",null,(0,n.__)("Image","catfolders-document-gallery"))),(0,t.createElement)("th",{className:"cf-title-th"},(0,t.createElement)("span",null,(0,n.__)("Title","catfolders-document-gallery"))),(0,t.createElement)("th",null,(0,t.createElement)("span",null,(0,n.__)("Type","catfolders-document-gallery"))),(0,t.createElement)("th",null,(0,t.createElement)("span",null,(0,n.__)("Size","catfolders-document-gallery"))),(0,t.createElement)("th",null,(0,t.createElement)("span",null,(0,n.__)("Updated","catfolders-document-gallery"))),(0,t.createElement)("th",null,(0,t.createElement)("span",null,(0,n.__)("Counter","catfolders-document-gallery"))),(0,t.createElement)("th",null,(0,t.createElement)("span",null,(0,n.__)("Link","catfolders-document-gallery"))))))))):(0,t.createElement)(U,null))},R=(e,t)=>{let l=[];return e.forEach((e=>{const a="-".repeat(t);l.push({...e,title:a+e.title}),e.children&&e.children.length&&(t++,l=l.concat(R(e.children,t)),t--)})),[...l]},{Notice:W,PanelBody:Y}=wp.components,G=JSON.parse('{"UU":"catfolders/document-gallery"}');(0,e.registerBlockType)(G.UU,{icon:{src:()=>(0,t.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",enableBackground:"new 0 0 512 512"},(0,t.createElement)("g",null,(0,t.createElement)("g",null,(0,t.createElement)("path",{fill:"#EA60D5",d:"M402.6,247.3c-5.1-7.4-13.5-13.3-24.4-17.1c0,0,0,0,0,0c-5.6-1.9-12.5-2.7-21.2-2.6c-4.2,0.1-8.9,0.4-13.9,1 c-4.6,0.5-9.5,1.3-14.4,2.2c-4.8-4.7-9-9.3-12.8-13.8c-8.3-10-16.2-21.2-23.5-33.2c-1.4-2.3-2.6-4.3-3.6-6.2 c1.3-2.8,2.5-5.7,3.7-8.7c1.9-4.8,3.5-9.3,4.7-13.6c2.7-9.4,3.8-17,3.2-23.3c-2.1-24-15.9-39-34.4-37.4 c-18.5,1.6-29.5,18.8-27.4,42.8c0.5,5.9,2.6,12.5,6.3,20.4c1.8,3.8,4,7.9,6.6,12.3c2.4,4.1,5.1,8.3,8.1,12.6l-1.4,3.7 c-5,13-10.1,26.1-15.1,38.2l-3.1,7.5c-3.8,9.3-7.3,17.4-10.3,24.1l0,0c-4.2,0.7-8.6,1.7-13.1,2.7c-5,1.2-9.6,2.5-13.8,3.9 c-9.2,3.1-16.1,6.6-21,10.7c-18.4,15.5-22.8,35.4-10.9,49.6c5.7,6.8,13.3,10.1,21.7,10.1c9.3,0,19.5-4.1,29.1-12.2 c4.5-3.8,8.8-9.3,13.1-16.9c2.1-3.7,4.2-7.8,6.3-12.4c0.9-2,1.7-3.9,2.4-5.9l0.5-1.2c0.2-0.2,0.3-0.4,0.4-0.7l2.4-5 c18.3-5.8,37.5-11.1,57-15.6c6.1-1.4,11.7-2.7,17-3.8c2.1,2.3,4.2,4.7,6.5,7c3.6,3.6,7.1,6.9,10.5,9.8c7.4,6.3,14,10.4,20,12.5 c22.8,7.8,42.1,1.3,48.2-16.2C409.1,264.1,407.9,255,402.6,247.3z M369.9,254.1c6.4,2.2,9.5,4.6,10.9,6.2c2,2.3,1.5,3.7,1.4,4.2 c-0.2,0.5-0.7,1.9-3.7,2.5c-2.1,0.4-6,0.3-12.4-1.9c-1.7-0.6-5.4-2.4-11.9-7.8c-1.1-0.9-2.6-2.3-4.2-3.8c2.9-0.3,6-0.5,7.5-0.5 C362.9,252.8,367.4,253.2,369.9,254.1z M268.3,119.8c0.1,0,0.2,0,0.3,0c0.7,0,2,0.3,3.4,2.4c1.2,1.8,2.7,5.3,3.3,12.1 c0.2,1.7,0.1,5.9-2.3,14c-0.4,1.3-1.1,3.4-1.7,5.4c-1.4-2.6-2.9-5.2-3.5-6.6c-3.1-6.6-3.8-10.3-4-11.8 C263,126.3,264.8,120.1,268.3,119.8z M263.4,241.7l3.1-7.7c3.5-8.7,7.2-17.9,10.8-27.1c6.4,9.8,12.7,18.4,19.3,26.3 c1.4,1.7,2.9,3.4,4.3,5c-0.9,0.2-1.8,0.4-2.7,0.6c-11.7,2.7-24.1,6-37.7,9.9C261.4,246.5,262.4,244.2,263.4,241.7z M216.4,285.2 c-1.3,2.6-2.6,5.3-3.4,6.7c-2.7,4.7-5.3,8.3-7.4,10.1c-5.2,4.4-8.8,5.8-10.9,6.2c-3,0.6-4-0.6-4.3-1c-0.3-0.4-1.3-1.6-0.2-4.4 c0.8-2,2.8-5.3,8-9.7c1.3-1.1,4.8-3.4,12.8-6.1C212.3,286.4,214.3,285.8,216.4,285.2z M463.3,135.2c0.2-3.4-1-6.8-3.4-9.4 l-82.3-85.3c-2.3-2.3-5.3-3.5-8.4-3.7c-0.5-0.1-1-0.1-1.5-0.1H155.5c-25.8,0-46.8,21-46.8,46.8v25.3H83.5c-25.8,0-46.8,21-46.8,46.8 v261c0,25.8,21,46.8,46.8,46.8h261c25.8,0,46.8-21,46.8-46.8v-25.3h25.3c25.8,0,46.8-21,46.8-46.8V135.9c0,0,0,0,0,0v-0.4 C463.3,135.3,463.3,135.3,463.3,135.2z M381.1,80.4l40.2,41.6h-40.2V80.4z M366.1,416.5c0,11.9-9.7,21.7-21.7,21.7h-261 c-11.9,0-21.7-9.7-21.7-21.7v-261c0-11.9,9.7-21.7,21.7-21.7h25.3v210.6c0,25.8,21,46.8,46.8,46.8h210.6V416.5z M438.2,344.5 c0,11.9-9.7,21.7-21.7,21.7h-25.3h-25.1H155.5c-11.9,0-21.7-9.7-21.7-21.7V133.9v-25.1V83.5c0-11.9,9.7-21.7,21.7-21.7h200.4v48.4 v24.3c0,1,0.1,2,0.4,2.9c1,4,3.8,7.3,7.6,8.8c1.4,0.6,2.9,0.9,4.6,0.9h22h47.7V344.5z"}))))},edit:function({attributes:e,setAttributes:o,clientId:r}){const s=(0,l.useBlockProps)(),{treeOptions:i,getTreeOptions:d}=(()=>{const[e,t]=(0,a.useState)([]);return{treeOptions:e,getTreeOptions:async function(){const e=await H("get-all-tree-folders"),l=R(e.tree,0).map((e=>({value:e.id,label:e.title})));t(l)}}})(),{folders:u}=e,[m,p]=(0,a.useState)(!0),[f,g]=(0,a.useState)({imageColumnNotice:!1});(0,a.useEffect)((()=>{(async()=>{await d(),p(!1)})()}),[]);const y=(0,a.useRef)(null);return(0,t.createElement)("div",{...s},(0,t.createElement)("div",{ref:y}),f.imageColumnNotice&&(0,t.createElement)(W,{status:"warning",isDismissible:!0,className:"catf-config-notice",onRemove:()=>{g({imageColumnNotice:!1})}},catf_dg.verify_imagick.message,(0,t.createElement)("span",null,"Â ",(0,t.createElement)("a",{href:catf_dg.verify_imagick.navigatePage.url,target:"_blank",rel:"noreferrer"},catf_dg.verify_imagick.navigatePage.content))),(0,t.createElement)(F,{attributes:e,clientId:r}),(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(Y,{initialOpen:!0,title:(0,n.__)("Folders","catfolders-document-gallery")},m?(0,t.createElement)(c,null):(0,t.createElement)(z,{folders:u,treeOptions:i,setAttributes:o}))),(0,t.createElement)(O,{attributes:e,setAttributes:o,clientId:r}),(0,t.createElement)(M,{attributes:e,setAttributes:o,clientId:r,setNotice:g,topRef:y}))},save:()=>null})})();